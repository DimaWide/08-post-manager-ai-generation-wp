(()=>{"use strict";function e(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!(e<2)){var o,a,c=document.querySelector(".pagination");if(c.innerHTML="",Math.min(e,4),n>1){var i=document.createElement("button");i.textContent="←",i.className="page-button",i.addEventListener("click",(function(){t(--n),g()})),c.appendChild(i)}if(e>1&&n>3){var r=document.createElement("button");if(r.textContent="1",r.className="page-button",r.disabled=1===n,r.addEventListener("click",(function(){t(n=1),g()})),c.appendChild(r),n>3&&e>4){var s=document.createElement("span");s.className="page-dots",s.textContent="...",c.appendChild(s)}}e<=4?(o=2,a=e):(o=Math.max(2,n-1),(a=Math.min(e-1,n+1))-o<2&&(2===o?a=4:o=e-3));for(var d=function(e){var o=document.createElement("button");o.textContent=e,o.className="page-button",o.disabled=e===n,e==n&&o.classList.add("active"),o.addEventListener("click",(function(){t(n=e),g()})),c.appendChild(o)},l=o-1;l<=a;l++)d(l);if(e>4&&n<e-2){var u=document.createElement("span");u.className="page-dots",u.textContent="...",c.appendChild(u)}if(e>1&&n>5){var p=document.createElement("button");p.textContent=e,p.className="page-button",p.disabled=n===e,p.addEventListener("click",(function(){t(n=e),g()})),c.appendChild(p)}if(n<e){var m=document.createElement("button");m.textContent="→",m.className="page-button",m.addEventListener("click",(function(){t(++n),g()})),c.appendChild(m)}}function g(){var e=document.querySelector(".cmp-3-posts");if(e){var t=e.getBoundingClientRect().top+window.pageYOffset-50;window.scrollTo({top:t,behavior:"smooth"})}}}function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.log(t),fetch("".concat(postManagerApi.api_url,"posts?page=").concat(t),{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":postManagerApi.nonce}}).then((function(e){return e.json()})).then((function(t){n(t.posts),e(t.total_pages,t.current_page)})).catch((function(e){return console.error("Error:",e)}))}function n(e){var t=document.querySelector(".posts-list");t.innerHTML="",e.forEach((function(e){var n=document.createElement("li");n.classList.add("cmp3-item"),n.classList.add("post-".concat(e.ID));var o=e.post_content.replace(/<(?!\/?p\b)[^>]+>/gi,""),a=o.length>200?o.substring(0,200)+"...":o;n.innerHTML='\n               <div class="cmp3-item-content">\n\t             <div class="cmp3-item-img">\n               '.concat(e.featured_media?'<img src="'.concat(e.featured_media,'" alt="Featured Image" >'):"",'\n               </div>\n               <div class="cmp3-item-info">\n                 <h3 class="cmp3-item-item-title">').concat(e.post_title,'</h3>\n                  <div class="cmp3-item-desc">\n         ').concat(a,'\n                 </div>\n                </div>\n                </div>\n            \n                <div class="cmp3-item-btns">\n                 <button class="edit-post" data-id="').concat(e.ID,'">Edit</button>\n                <button class="delete-post" data-id="').concat(e.ID,'">Delete</button>\n                  <a href="').concat(e.permalink,'" class="view-post" target="_blank">View Post</a> \x3c!-- Link to the post --\x3e\n                </div>\n            '),t.appendChild(n)})),document.querySelectorAll(".edit-post").forEach((function(e){e.addEventListener("click",(function(){var e;e=this.getAttribute("data-id"),fetch(postManagerApi.api_url+"post/"+e,{method:"GET",headers:{"X-WP-Nonce":postManagerApi.nonce}}).then((function(e){return e.json()})).then((function(e){document.getElementById("post-id").value=e.id,document.getElementById("post-title").value=e.title,tinyMCE.get("post-content").setContent(e.content)})).catch((function(e){alert("Error fetching post")}));var t=document.querySelector(".cmp-2-post-form");if(t){var n=t.getBoundingClientRect().top+window.pageYOffset-60;window.scrollTo({top:n,behavior:"smooth"})}}))})),document.querySelectorAll(".delete-post").forEach((function(e){e.addEventListener("click",(function(){var e;e=this.getAttribute("data-id"),confirm("Are you sure you want to delete this post?")&&fetch(postManagerApi.api_url+"post/"+e,{method:"DELETE",headers:{"X-WP-Nonce":postManagerApi.nonce}}).then((function(e){return e.json()})).then((function(e){console.log(e),alert("Post deleted successfully!"),o()})).catch((function(e){console.log(e),alert("Error deleting post")}))}))}))}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;fetch("".concat(postManagerApi.api_url,"posts?page=").concat(t),{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":postManagerApi.nonce}}).then((function(e){return e.json()})).then((function(t){n(t.posts),e(t.total_pages,t.current_page)})).catch((function(e){return console.error("Error:",e)}))}document.addEventListener("DOMContentLoaded",(function(){tinymce.init({selector:"#post-content",setup:function(e){e.on("init",(function(){console.log("TinyMCE is initialized")}))}}),document.getElementById("aiml-form").addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector(".data-aiml-form"),n=document.getElementById("prompt").value;t.querySelector("button").classList.add("blink"),t.querySelector("button").setAttribute("disabled","disabled"),fetch(postManagerApi.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:new URLSearchParams({action:"openai_generate_ai_text",prompt:n,security:postManagerApi.nonce_02})}).then((function(e){return e.json()})).then((function(e){var n=e.data.text;if(e.success){var o=n.split("\n");o.splice(0,2),n=o.join("\n")}document.getElementById("result").value=n,t.querySelector("button").classList.remove("blink"),t.querySelector("button").removeAttribute("disabled"),document.getElementById("result-container").classList.remove("hidden"),console.log(e)})).catch((function(e){return console.error("Error:",e)}))})),document.getElementById("copy-button").addEventListener("click",(function(){document.getElementById("result").select(),document.execCommand("copy"),alert("Text copied to clipboard!")})),o(1),document.getElementById("post-form").addEventListener("submit",(function(e){e.preventDefault();var t=this;t.querySelector("#save-post").classList.add("blink"),t.querySelector("button").setAttribute("disabled","disabled");var n=document.getElementById("post-id").value,a=document.getElementById("post-title").value,c=tinyMCE.get("post-content").getContent(),i=new FormData(this);i.append("title",a),i.append("content",c);var r=postManagerApi.api_url+(n?"post-change/"+n:"post");fetch(r,{method:"POST",headers:{"X-WP-Nonce":postManagerApi.nonce},body:i}).then((function(e){return e.json()})).then((function(e){e.id?(alert("Post saved successfully!"),document.getElementById("post-id").value="",document.getElementById("post-title").value="",tinyMCE.get("post-content").setContent(""),document.getElementById("post-featured-image").value="",o(),document.getElementById("image-preview").innerHTML="",document.getElementById("image-preview").style.display="none"):alert("Error saving post."),t.querySelector("#save-post").classList.remove("blink"),t.querySelector("button").removeAttribute("disabled")})).catch((function(e){alert("Error: "+e.message)}))})),document.getElementById("post-featured-image").addEventListener("change",(function(){var e=this.files[0],t=document.getElementById("image-preview");if(e){var n=new FileReader;n.onload=function(e){t.innerHTML='<img src="'.concat(e.target.result,'" alt="Image Preview">'),document.getElementById("image-preview").style.display="block"},n.readAsDataURL(e)}else t.innerHTML="",document.getElementById("image-preview").style.display="none"})),e()}))})();
//# sourceMappingURL=bundle.js.map