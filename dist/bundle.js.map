{"version":3,"file":"bundle.js","mappings":"mBAEO,SAASA,EAAgBC,GAA6B,IAAjBC,EAAWC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EAEtD,KAAIF,EAAa,GAAjB,CAIA,IAqCIK,EAAWC,EArCTC,EAAsBC,SAASC,cAAc,eAKnD,GAJAF,EAAoBG,UAAY,GAETC,KAAKC,IAAIZ,EAAY,GAExCC,EAAc,EAAG,CACjB,IAAMY,EAAaL,SAASM,cAAc,UAC1CD,EAAWE,YAAc,IACzBF,EAAWG,UAAY,cACvBH,EAAWI,iBAAiB,SAAS,WAEjCC,IADAjB,GAEAkB,GACJ,IACAZ,EAAoBa,YAAYP,EACpC,CAEA,GAAIb,EAAa,GAAKC,EAAc,EAAG,CACnC,IAAMoB,EAAkBb,SAASM,cAAc,UAW/C,GAVAO,EAAgBN,YAAc,IAC9BM,EAAgBL,UAAY,cAC5BK,EAAgBC,SAA4B,IAAhBrB,EAC5BoB,EAAgBJ,iBAAiB,SAAS,WAEtCC,EADAjB,EAAc,GAEdkB,GACJ,IACAZ,EAAoBa,YAAYC,GAE5BpB,EAAc,GAAKD,EAAa,EAAG,CACnC,IAAMuB,EAAWf,SAASM,cAAc,QACxCS,EAASP,UAAY,YACrBO,EAASR,YAAc,MACvBR,EAAoBa,YAAYG,EACpC,CACJ,CAGIvB,GAAc,GACdK,EAAY,EACZC,EAAUN,IAEVK,EAAYM,KAAKa,IAAI,EAAGvB,EAAc,IACtCK,EAAUK,KAAKC,IAAIZ,EAAa,EAAGC,EAAc,IAEnCI,EAAY,IACJ,IAAdA,EACAC,EAAU,EAEVD,EAAYL,EAAa,IAKrC,IAFC,IAAAyB,EAAA,SAAAC,GAGG,IAAMC,EAAanB,SAASM,cAAc,UAC1Ca,EAAWZ,YAAcW,EACzBC,EAAWX,UAAY,cACvBW,EAAWL,SAAYI,IAAMzB,EAEzByB,GAAKzB,GACL0B,EAAWC,UAAUC,IAAI,UAG7BF,EAAWV,iBAAiB,SAAS,WAEjCC,EADAjB,EAAcyB,GAEdP,GACJ,IACAZ,EAAoBa,YAAYO,EACpC,EAhBSD,EAAIrB,EAAY,EAAGqB,GAAKpB,EAASoB,IAAGD,EAAAC,GAkB7C,GAAI1B,EAAa,GAAKC,EAAcD,EAAa,EAAG,CAChD,IAAMuB,EAAWf,SAASM,cAAc,QACxCS,EAASP,UAAY,YACrBO,EAASR,YAAc,MACvBR,EAAoBa,YAAYG,EACpC,CAEA,GAAIvB,EAAa,GAAKC,EAAc,EAAG,CACnC,IAAM6B,EAAiBtB,SAASM,cAAc,UAC9CgB,EAAef,YAAcf,EAC7B8B,EAAed,UAAY,cAC3Bc,EAAeR,SAAYrB,IAAgBD,EAC3C8B,EAAeb,iBAAiB,SAAS,WAErCC,EADAjB,EAAcD,GAEdmB,GACJ,IACAZ,EAAoBa,YAAYU,EACpC,CAEA,GAAI7B,EAAcD,EAAY,CAC1B,IAAM+B,EAAavB,SAASM,cAAc,UAC1CiB,EAAWhB,YAAc,IACzBgB,EAAWf,UAAY,cACvBe,EAAWd,iBAAiB,SAAS,WAEjCC,IADAjB,GAEAkB,GACJ,IACAZ,EAAoBa,YAAYW,EACpC,CAxGA,CA2GA,SAASZ,IACL,IAAIa,EAAUxB,SAASC,cAAc,gBACrC,GAAIuB,EAAS,CACT,IAAIC,EAAkBD,EAAQE,wBAAwBC,IAAMC,OAAOC,YAAc,GACjFD,OAAOE,SAAS,CACZH,IAAKF,EACLM,SAAU,UAElB,CACJ,CACJ,CAGA,SAASrB,IAAqB,IAAVsB,EAAItC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EACvBuC,QAAQC,IAAIF,GACZG,MAAM,GAADC,OAAIC,eAAeC,QAAO,eAAAF,OAAcJ,GAAQ,CACjDO,OAAQ,MACRC,QAAS,CACL,eAAgB,mBAChB,aAAcH,eAAeI,SAGhCC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAAAG,GACFC,EAAaD,EAAKE,OAClBxD,EAAgBsD,EAAKG,YAAaH,EAAKI,aAC3C,IAAE,OACK,SAAAC,GAAK,OAAIjB,QAAQiB,MAAM,SAAUA,EAAM,GACtD,CCnFO,SAASJ,EAAaC,GACzB,IAAMI,EAAYnD,SAASC,cAAc,eACzCkD,EAAUjD,UAAY,GACtB6C,EAAMK,SAAQ,SAAAC,GACV,IAAMC,EAAWtD,SAASM,cAAc,MACxCgD,EAASlC,UAAUC,IAAI,aACvBiC,EAASlC,UAAUC,IAAI,QAADe,OAASiB,EAAKE,KAEpC,IAAMC,EAAmCH,EAAKI,aA+FnCC,QAAQ,sBAAuB,IA7FpCC,EAAiBH,EAAiB7D,OAAS,IAC3C6D,EAAiBI,UAAU,EAAG,KAAO,MACrCJ,EAENF,EAASpD,UAAY,gHAAHkC,OAGTiB,EAAKQ,eAAiB,aAAHzB,OAAgBiB,EAAKQ,eAAc,4BAA6B,GAAE,4HAAAzB,OAGlDiB,EAAKS,WAAU,oEAAA1B,OAExDuB,EAAc,+LAAAvB,OAM6BiB,EAAKE,GAAE,0EAAAnB,OACNiB,EAAKE,GAAE,kDAAAnB,OACjCiB,EAAKU,UAAS,2HAGnCZ,EAAUvC,YAAY0C,EAC1B,IAEAtD,SAASgE,iBAAiB,cAAcZ,SAAQ,SAAAa,GAC5CA,EAAOxD,iBAAiB,SAAS,WAwBzC,IAAkByD,IAvBSC,KAAKC,aAAa,WAwBzCjC,MAAME,eAAeC,QAAU,QAAU4B,EAAQ,CAC7C3B,OAAQ,MACRC,QAAS,CACL,aAAcH,eAAeI,SAGhCC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAAAW,GACFrD,SAASqE,eAAe,WAAWC,MAAQjB,EAAKkB,GAChDvE,SAASqE,eAAe,cAAcC,MAAQjB,EAAKmB,MACnDC,QAAQC,IAAI,gBAAgBC,WAAWtB,EAAKuB,QAChD,IAAE,OACK,SAAA1B,GACH2B,MAAM,sBACV,IAnCI,IAAIrD,EAAUxB,SAASC,cAAc,oBACrC,GAAIuB,EAAS,CACT,IAAIC,EAAkBD,EAAQE,wBAAwBC,IAAMC,OAAOC,YAAc,GACjFD,OAAOE,SAAS,CACZH,IAAKF,EACLM,SAAU,UAElB,CACJ,GACJ,IAEA/B,SAASgE,iBAAiB,gBAAgBZ,SAAQ,SAAAa,GAC9CA,EAAOxD,iBAAiB,SAAS,WA0BzC,IAAoByD,IAzBOC,KAAKC,aAAa,WA0BpCU,QAAQ,+CAIb3C,MAAME,eAAeC,QAAU,QAAU4B,EAAQ,CAC7C3B,OAAQ,SACRC,QAAS,CACL,aAAcH,eAAeI,SAGhCC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAAAG,GACFZ,QAAQC,IAAIW,GACZgC,MAAM,8BACNnE,GACJ,IAAE,OACK,SAAAwC,GACHjB,QAAQC,IAAIgB,GACZ2B,MAAM,sBACV,GA3CA,GACJ,GACJ,CAgDA,SAASnE,IAAqB,IAAVsB,EAAItC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EACvByC,MAAM,GAADC,OAAIC,eAAeC,QAAO,eAAAF,OAAcJ,GAAQ,CACjDO,OAAQ,MACRC,QAAS,CACL,eAAgB,mBAChB,aAAcH,eAAeI,SAGhCC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAAAG,GACFC,EAAaD,EAAKE,OAClBxD,EAAgBsD,EAAKG,YAAaH,EAAKI,aAC3C,IAAE,OACK,SAAAC,GAAK,OAAIjB,QAAQiB,MAAM,SAAUA,EAAM,GACtD,CC5KAlD,SAASS,iBAAiB,oBAAoB,WCL1CsE,QAAQC,KAAK,CACTC,SAAU,gBACVC,MAAO,SAAUC,GACbA,EAAOC,GAAG,QAAQ,WACdnD,QAAQC,IAAI,yBAChB,GACJ,ICLJlC,SAASqE,eAAe,aAAa5D,iBAAiB,UAAU,SAAU4E,GACtEA,EAAEC,iBAEF,IAAIC,EAAUvF,SAASC,cAAc,mBAC/BuF,EAASxF,SAASqE,eAAe,UAAUC,MAEjDiB,EAAQtF,cAAc,UAAUmB,UAAUC,IAAI,SAC9CkE,EAAQtF,cAAc,UAAUwF,aAAa,WAAY,YAEzDtD,MAAME,eAAeqD,SAAU,CAC3BnD,OAAQ,OACRC,QAAS,CACL,eAAgB,oDAEpBmD,KAAM,IAAIC,gBAAgB,CACtBC,OAAQ,0BACRL,OAAQA,EACRM,SAAUzD,eAAe0D,aAG5BrD,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAAAG,GAEF,IAAImD,EAAOnD,EAAKA,KAAKmD,KAErB,GAAInD,EAAKoD,QAAS,CACd,IAAIC,EAAQF,EAAKG,MAAM,MACvBD,EAAME,OAAO,EAAG,GAChBJ,EAAOE,EAAMG,KAAK,KACtB,CAGArG,SAASqE,eAAe,UAAUC,MAAQ0B,EAC1CT,EAAQtF,cAAc,UAAUmB,UAAUkF,OAAO,SACjDf,EAAQtF,cAAc,UAAUsG,gBAAgB,YAChDvG,SAASqE,eAAe,oBAAoBjD,UAAUkF,OAAO,UAEhErE,QAAQC,IAAIW,EACb,IAAE,OACK,SAAAK,GAAK,OAAIjB,QAAQiB,MAAM,SAAUA,EAAM,GACtD,IAGAlD,SAASqE,eAAe,eAAe5D,iBAAiB,SAAS,WACtCT,SAASqE,eAAe,UAChCmC,SACfxG,SAASyG,YAAY,QAErB5B,MAAM,4BACV,IH/CAnE,EADkB,GAGlBV,SAASqE,eAAe,aAAa5D,iBAAiB,UAAU,SAAU4E,GACtEA,EAAEC,iBACF,IAAIoB,EAAOvC,KACXuC,EAAKzG,cAAc,cAAcmB,UAAUC,IAAI,SAC/CqF,EAAKzG,cAAc,UAAUwF,aAAa,WAAY,YAEtD,IAAMvB,EAASlE,SAASqE,eAAe,WAAWC,MAC5CE,EAAQxE,SAASqE,eAAe,cAAcC,MAC9CM,EAAUH,QAAQC,IAAI,gBAAgBiC,aACtCC,EAAW,IAAIC,SAAS1C,MAE9ByC,EAASE,OAAO,QAAStC,GACzBoC,EAASE,OAAO,UAAWlC,GAE3B,IACImC,EAAS1E,eAAeC,SAAW4B,EAAS,eAAiBA,EAAS,QAE1E/B,MAAM4E,EAAQ,CACVxE,OAJS,OAKTC,QAAS,CACL,aAAcH,eAAeI,OAEjCkD,KAAMiB,IAELlE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAAAG,GACEA,EAAK0B,IACLM,MAAM,4BAkBlB7E,SAASqE,eAAe,WAAWC,MAAQ,GAC3CtE,SAASqE,eAAe,cAAcC,MAAQ,GAC9CG,QAAQC,IAAI,gBAAgBC,WAAW,IACvC3E,SAASqE,eAAe,uBAAuBC,MAAQ,GAnB3C5D,IACAV,SAASqE,eAAe,iBAAiBnE,UAAY,GACrDF,SAASqE,eAAe,iBAAiB2C,MAAMC,QAAU,QAEzDpC,MAAM,sBAGV6B,EAAKzG,cAAc,cAAcmB,UAAUkF,OAAO,SAClDI,EAAKzG,cAAc,UAAUsG,gBAAgB,WACjD,IAAE,OACK,SAAArD,GACH2B,MAAM,UAAY3B,EAAMgE,QAC5B,GACR,II9CAlH,SAASqE,eAAe,uBAAuB5D,iBAAiB,UAAU,WACtE,IAAM0G,EAAOhD,KAAKiD,MAAM,GAClBC,EAAUrH,SAASqE,eAAe,iBAExC,GAAI8C,EAAM,CACN,IAAMG,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAAUnC,GACtBgC,EAAQnH,UAAY,aAAHkC,OAAgBiD,EAAEoC,OAAOC,OAAM,0BAC/C1H,SAASqE,eAAe,iBAAiB2C,MAAMC,QAAU,OAC9D,EACAK,EAAOK,cAAcR,EACzB,MACIE,EAAQnH,UAAY,GACjBF,SAASqE,eAAe,iBAAiB2C,MAAMC,QAAU,MAEpE,IHNA1H,GAEJ,G","sources":["webpack://post-manager/./assets/js/modules/pagination.js","webpack://post-manager/./assets/js/modules/postHandler.js","webpack://post-manager/./assets/js/index.js","webpack://post-manager/./assets/js/modules/editor.js","webpack://post-manager/./assets/js/modules/formHandler.js","webpack://post-manager/./assets/js/modules/imagePreview.js"],"sourcesContent":["import { displayPosts } from './postHandler';\r\n\r\nexport function setupPagination(totalPages, currentPage = 1) {\r\n\r\n    if (totalPages < 2) {\r\n        return\r\n    }\r\n\r\n    const paginationContainer = document.querySelector('.pagination');\r\n    paginationContainer.innerHTML = '';\r\n\r\n    const minPagesToShow = Math.min(totalPages, 4);\r\n\r\n    if (currentPage > 1) {\r\n        const prevButton = document.createElement('button');\r\n        prevButton.textContent = '←';\r\n        prevButton.className = 'page-button';\r\n        prevButton.addEventListener('click', () => {\r\n            currentPage--;\r\n            fetchPosts(currentPage);\r\n            scrollToSection()\r\n        });\r\n        paginationContainer.appendChild(prevButton);\r\n    }\r\n\r\n    if (totalPages > 1 && currentPage > 3) {\r\n        const firstPageButton = document.createElement('button');\r\n        firstPageButton.textContent = '1';\r\n        firstPageButton.className = 'page-button';\r\n        firstPageButton.disabled = (currentPage === 1);\r\n        firstPageButton.addEventListener('click', () => {\r\n            currentPage = 1;\r\n            fetchPosts(currentPage);\r\n            scrollToSection()\r\n        });\r\n        paginationContainer.appendChild(firstPageButton);\r\n\r\n        if (currentPage > 3 && totalPages > 4) {\r\n            const ellipsis = document.createElement('span');\r\n            ellipsis.className = 'page-dots'\r\n            ellipsis.textContent = '...';\r\n            paginationContainer.appendChild(ellipsis);\r\n        }\r\n    }\r\n\r\n    let startPage, endPage;\r\n    if (totalPages <= 4) {\r\n        startPage = 2;\r\n        endPage = totalPages;\r\n    } else {\r\n        startPage = Math.max(2, currentPage - 1);\r\n        endPage = Math.min(totalPages - 1, currentPage + 1);\r\n\r\n        if (endPage - startPage < 2) {\r\n            if (startPage === 2) {\r\n                endPage = 4;\r\n            } else {\r\n                startPage = totalPages - 3;\r\n            }\r\n        }\r\n    }\r\n\r\n    for (let i = startPage - 1; i <= endPage; i++) {\r\n        const pageButton = document.createElement('button');\r\n        pageButton.textContent = i;\r\n        pageButton.className = 'page-button';\r\n        pageButton.disabled = (i === currentPage);\r\n\r\n        if (i == currentPage) {\r\n            pageButton.classList.add('active');\r\n        }\r\n\r\n        pageButton.addEventListener('click', () => {\r\n            currentPage = i;\r\n            fetchPosts(currentPage);\r\n            scrollToSection()\r\n        });\r\n        paginationContainer.appendChild(pageButton);\r\n    }\r\n\r\n    if (totalPages > 4 && currentPage < totalPages - 2) {\r\n        const ellipsis = document.createElement('span');\r\n        ellipsis.className = 'page-dots'\r\n        ellipsis.textContent = '...';\r\n        paginationContainer.appendChild(ellipsis);\r\n    }\r\n\r\n    if (totalPages > 1 && currentPage > 5) {\r\n        const lastPageButton = document.createElement('button');\r\n        lastPageButton.textContent = totalPages;\r\n        lastPageButton.className = 'page-button';\r\n        lastPageButton.disabled = (currentPage === totalPages);\r\n        lastPageButton.addEventListener('click', () => {\r\n            currentPage = totalPages;\r\n            fetchPosts(currentPage);\r\n            scrollToSection()\r\n        });\r\n        paginationContainer.appendChild(lastPageButton);\r\n    }\r\n\r\n    if (currentPage < totalPages) {\r\n        const nextButton = document.createElement('button');\r\n        nextButton.textContent = '→';\r\n        nextButton.className = 'page-button';\r\n        nextButton.addEventListener('click', () => {\r\n            currentPage++;\r\n            fetchPosts(currentPage);\r\n            scrollToSection()\r\n        });\r\n        paginationContainer.appendChild(nextButton);\r\n    }\r\n\r\n\r\n    function scrollToSection() {\r\n        let element = document.querySelector('.cmp-3-posts');\r\n        if (element) {\r\n            let elementPosition = element.getBoundingClientRect().top + window.pageYOffset - 50;\r\n            window.scrollTo({\r\n                top: elementPosition,\r\n                behavior: \"smooth\"\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction fetchPosts(page = 1) {\r\n    console.log(page)\r\n    fetch(`${postManagerApi.api_url}posts?page=${page}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'X-WP-Nonce': postManagerApi.nonce,\r\n        },\r\n    })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            displayPosts(data.posts);\r\n            setupPagination(data.total_pages, data.current_page);\r\n        })\r\n        .catch(error => console.error('Error:', error));\r\n}\r\n","import { setupPagination } from './pagination';\r\n\r\nexport function setupPostHandler() {\r\n    let currentPage = 1;\r\n    fetchPosts(currentPage);\r\n\r\n    document.getElementById('post-form').addEventListener('submit', function (e) {\r\n        e.preventDefault();\r\n        let self = this\r\n        self.querySelector('#save-post').classList.add('blink');\r\n        self.querySelector('button').setAttribute('disabled', 'disabled')\r\n\r\n        const postId = document.getElementById('post-id').value;\r\n        const title = document.getElementById('post-title').value;\r\n        const content = tinyMCE.get('post-content').getContent(); // Получение контента из WYSIWYG редактора\r\n        const formData = new FormData(this); // Используем FormData для отправки файла\r\n\r\n        formData.append('title', title);\r\n        formData.append('content', content);\r\n\r\n        let method = 'POST';\r\n        let apiUrl = postManagerApi.api_url + (postId ? 'post-change/' + postId : 'post');\r\n\r\n        fetch(apiUrl, {\r\n            method: method,\r\n            headers: {\r\n                'X-WP-Nonce': postManagerApi.nonce,\r\n            },\r\n            body: formData,\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                if (data.id) {\r\n                    alert('Post saved successfully!');\r\n                    clearForm();\r\n                    fetchPosts();\r\n                    document.getElementById('image-preview').innerHTML = '';\r\n                    document.getElementById('image-preview').style.display = 'none'\r\n                } else {\r\n                    alert('Error saving post.');\r\n                }\r\n\r\n                self.querySelector('#save-post').classList.remove('blink');\r\n                self.querySelector('button').removeAttribute('disabled')\r\n            })\r\n            .catch(error => {\r\n                alert('Error: ' + error.message);\r\n            });\r\n    });\r\n\r\n    function clearForm() {\r\n        document.getElementById('post-id').value = '';\r\n        document.getElementById('post-title').value = '';\r\n        tinyMCE.get('post-content').setContent('');\r\n        document.getElementById('post-featured-image').value = '';\r\n    }\r\n}\r\n\r\nexport function displayPosts(posts) {\r\n    const postsList = document.querySelector('.posts-list');\r\n    postsList.innerHTML = '';\r\n    posts.forEach(post => {\r\n        const postItem = document.createElement('li');\r\n        postItem.classList.add('cmp3-item');\r\n        postItem.classList.add(`post-${post.ID}`);\r\n\r\n        const sanitizedContent = sanitizeContent(post.post_content);\r\n\r\n        const trimmedContent = sanitizedContent.length > 200\r\n            ? sanitizedContent.substring(0, 200) + '...'\r\n            : sanitizedContent;\r\n\r\n        postItem.innerHTML = `\r\n               <div class=\"cmp3-item-content\">\r\n\t             <div class=\"cmp3-item-img\">\r\n               ${post.featured_media ? `<img src=\"${post.featured_media}\" alt=\"Featured Image\" >` : ''}\r\n               </div>\r\n               <div class=\"cmp3-item-info\">\r\n                 <h3 class=\"cmp3-item-item-title\">${post.post_title}</h3>\r\n                  <div class=\"cmp3-item-desc\">\r\n         ${trimmedContent}\r\n                 </div>\r\n                </div>\r\n                </div>\r\n            \r\n                <div class=\"cmp3-item-btns\">\r\n                 <button class=\"edit-post\" data-id=\"${post.ID}\">Edit</button>\r\n                <button class=\"delete-post\" data-id=\"${post.ID}\">Delete</button>\r\n                  <a href=\"${post.permalink}\" class=\"view-post\" target=\"_blank\">View Post</a> <!-- Link to the post -->\r\n                </div>\r\n            `;\r\n        postsList.appendChild(postItem);\r\n    });\r\n\r\n    document.querySelectorAll('.edit-post').forEach(button => {\r\n        button.addEventListener('click', function () {\r\n            const postId = this.getAttribute('data-id');\r\n            editPost(postId);\r\n\r\n            let element = document.querySelector('.cmp-2-post-form');\r\n            if (element) {\r\n                let elementPosition = element.getBoundingClientRect().top + window.pageYOffset - 60;\r\n                window.scrollTo({\r\n                    top: elementPosition,\r\n                    behavior: \"smooth\"\r\n                });\r\n            }\r\n        });\r\n    });\r\n\r\n    document.querySelectorAll('.delete-post').forEach(button => {\r\n        button.addEventListener('click', function () {\r\n            const postId = this.getAttribute('data-id');\r\n            deletePost(postId);\r\n        });\r\n    });\r\n}\r\n\r\n\r\nfunction editPost(postId) {\r\n    fetch(postManagerApi.api_url + 'post/' + postId, {\r\n        method: 'GET',\r\n        headers: {\r\n            'X-WP-Nonce': postManagerApi.nonce\r\n        }\r\n    })\r\n        .then(response => response.json())\r\n        .then(post => {\r\n            document.getElementById('post-id').value = post.id;\r\n            document.getElementById('post-title').value = post.title;\r\n            tinyMCE.get('post-content').setContent(post.content)\r\n        })\r\n        .catch(error => {\r\n            alert('Error fetching post');\r\n        });\r\n}\r\n\r\nfunction deletePost(postId) {\r\n    if (!confirm('Are you sure you want to delete this post?')) {\r\n        return;\r\n    }\r\n\r\n    fetch(postManagerApi.api_url + 'post/' + postId, {\r\n        method: 'DELETE',\r\n        headers: {\r\n            'X-WP-Nonce': postManagerApi.nonce\r\n        }\r\n    })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            console.log(data)\r\n            alert('Post deleted successfully!');\r\n            fetchPosts();\r\n        })\r\n        .catch(error => {\r\n            console.log(error)\r\n            alert('Error deleting post');\r\n        });\r\n}\r\n\r\nfunction sanitizeContent(content) {\r\n    return content.replace(/<(?!\\/?p\\b)[^>]+>/gi, '');\r\n}\r\n\r\nfunction fetchPosts(page = 1) {\r\n    fetch(`${postManagerApi.api_url}posts?page=${page}`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n            'X-WP-Nonce': postManagerApi.nonce,\r\n        },\r\n    })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            displayPosts(data.posts);\r\n            setupPagination(data.total_pages, data.current_page);\r\n        })\r\n        .catch(error => console.error('Error:', error));\r\n}","import { setupEditor } from './modules/editor';\r\nimport { setupFormHandler } from './modules/formHandler';\r\nimport { setupPostHandler } from './modules/postHandler';\r\nimport { setupImagePreview } from './modules/imagePreview';\r\nimport { setupPagination } from './modules/pagination';\r\n\r\ndocument.addEventListener('DOMContentLoaded', function () {\r\n    setupEditor();\r\n    setupFormHandler();\r\n    setupPostHandler();\r\n    setupImagePreview();\r\n    setupPagination();\r\n\r\n});","export function setupEditor() {\r\n    tinymce.init({\r\n        selector: '#post-content',\r\n        setup: function (editor) {\r\n            editor.on('init', function () {\r\n                console.log('TinyMCE is initialized');\r\n            });\r\n        }\r\n    });\r\n}\r\n","export function setupFormHandler() {\r\n\r\n    document.getElementById('aiml-form').addEventListener('submit', function (e) {\r\n        e.preventDefault();\r\n\r\n        let section = document.querySelector('.data-aiml-form')\r\n        const prompt = document.getElementById('prompt').value;\r\n\r\n        section.querySelector('button').classList.add('blink');\r\n        section.querySelector('button').setAttribute('disabled', 'disabled')\r\n\r\n        fetch(postManagerApi.ajax_url, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'\r\n            },\r\n            body: new URLSearchParams({\r\n                action: 'openai_generate_ai_text',\r\n                prompt: prompt,\r\n                security: postManagerApi.nonce_02\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n\r\n                let text = data.data.text;\r\n\r\n                if (data.success) {\r\n                    let lines = text.split('\\n');\r\n                    lines.splice(0, 2);\r\n                    text = lines.join('\\n');\r\n                }\r\n            \r\n                // document.getElementById('prompt').value = '';\r\n                document.getElementById('result').value = text;\r\n                section.querySelector('button').classList.remove('blink');\r\n                section.querySelector('button').removeAttribute('disabled')\r\n                document.getElementById('result-container').classList.remove('hidden');\r\n\r\n             console.log(data)\r\n            })\r\n            .catch(error => console.error('Error:', error));\r\n    });\r\n\r\n\r\n    document.getElementById('copy-button').addEventListener('click', function () {\r\n        const resultTextArea = document.getElementById('result');\r\n        resultTextArea.select(); \r\n        document.execCommand('copy'); \r\n\r\n        alert('Text copied to clipboard!'); \r\n    });\r\n\r\n}\r\n","export function setupImagePreview() {\r\n    \r\n    document.getElementById('post-featured-image').addEventListener('change', function () {\r\n        const file = this.files[0];\r\n        const preview = document.getElementById('image-preview');\r\n\r\n        if (file) {\r\n            const reader = new FileReader();\r\n            reader.onload = function (e) {\r\n                preview.innerHTML = `<img src=\"${e.target.result}\" alt=\"Image Preview\">`;\r\n                 document.getElementById('image-preview').style.display = 'block'\r\n            };\r\n            reader.readAsDataURL(file);\r\n        } else {\r\n            preview.innerHTML = ''; \r\n               document.getElementById('image-preview').style.display = 'none'\r\n        }\r\n    });\r\n}\r\n"],"names":["setupPagination","totalPages","currentPage","arguments","length","undefined","startPage","endPage","paginationContainer","document","querySelector","innerHTML","Math","min","prevButton","createElement","textContent","className","addEventListener","fetchPosts","scrollToSection","appendChild","firstPageButton","disabled","ellipsis","max","_loop","i","pageButton","classList","add","lastPageButton","nextButton","element","elementPosition","getBoundingClientRect","top","window","pageYOffset","scrollTo","behavior","page","console","log","fetch","concat","postManagerApi","api_url","method","headers","nonce","then","response","json","data","displayPosts","posts","total_pages","current_page","error","postsList","forEach","post","postItem","ID","sanitizedContent","post_content","replace","trimmedContent","substring","featured_media","post_title","permalink","querySelectorAll","button","postId","this","getAttribute","getElementById","value","id","title","tinyMCE","get","setContent","content","alert","confirm","tinymce","init","selector","setup","editor","on","e","preventDefault","section","prompt","setAttribute","ajax_url","body","URLSearchParams","action","security","nonce_02","text","success","lines","split","splice","join","remove","removeAttribute","select","execCommand","self","getContent","formData","FormData","append","apiUrl","style","display","message","file","files","preview","reader","FileReader","onload","target","result","readAsDataURL"],"sourceRoot":""}